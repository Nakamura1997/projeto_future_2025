<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relatório Executivo - {{ cliente.nome }}</title>
    <style>
        /* Estilos específicos para o relatório executivo */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            margin: 0;
            padding: 20px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            border-bottom: 2px solid #0056b3;
            padding-bottom: 20px;
        }
        .logo {
            height: 80px;
        }
        .section {
            margin-bottom: 30px;
            page-break-inside: avoid;
        }
        .section-title {
            color: #0056b3;
            border-bottom: 1px solid #0056b3;
            padding-bottom: 5px;
            margin-bottom: 15px;
        }
        .dashboard {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        .dashboard-item {
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .status-box {
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            font-weight: bold;
        }
        .status-excelente { background-color: #4CAF50; color: white; }
        .status-bom { background-color: #8BC34A; color: white; }
        .status-regular { background-color: #FFC107; color: black; }
        .status-atencao { background-color: #FF9800; color: white; }
        .status-critico { background-color: #F44336; color: white; }
        .priority-high { color: #F44336; font-weight: bold; }
        .priority-medium { color: #FF9800; font-weight: bold; }
        .priority-low { color: #4CAF50; font-weight: bold; }
        .footer {
            margin-top: 50px;
            text-align: center;
            font-size: 0.8em;
            color: #666;
            border-top: 1px solid #ddd;
            padding-top: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <img src="{{ logo_path }}" alt="Logo" class="logo">
        <div>
            <h1>Relatório Executivo de Segurança</h1>
            <h2>{{ cliente.nome }}</h2>
            <p>Data: {{ report.data_criacao|date:"d/m/Y" }}</p>
        </div>
    </div>

    <!-- Resumo Executivo -->
    <div class="section">
        <h2 class="section-title">Resumo Executivo</h2>
        
        <div class="dashboard">
            <div class="dashboard-item">
                <h3>Maturidade Geral</h3>
                <div class="status-box status-{{ funcoes.0.status|lower }}">
                    {{ media_geral|floatformat:2 }} - {{ funcoes.0.status }}
                </div>
                <p>Esta pontuação indica o nível geral de maturidade em segurança da informação da organização.</p>
            </div>
            
            <div class="dashboard-item">
                <h3>Áreas Críticas</h3>
                <ul>
                    {% for funcao in funcoes %}
                        {% if funcao.status in "Crítico,Atenção" %}
                        <li>{{ funcao.nome }} ({{ funcao.media|floatformat:2 }})</li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>

    <!-- Maturidade por Função -->
    <div class="section">
        <h2 class="section-title">Maturidade por Função NIST</h2>
        
        <table class="tabela">
            <thead>
                <tr>
                    <th>Função</th>
                    <th>Média</th>
                    <th>Status</th>
                    <th>Análise</th>
                </tr>
            </thead>
            <tbody>
                {% for funcao in funcoes %}
                <tr>
                    <td>{{ funcao.nome }}</td>
                    <td>{{ funcao.media|floatformat:2 }}</td>
                    <td class="status-{{ funcao.status|lower }}">{{ funcao.status }}</td>
                    <td>
                        {% if funcao.media < 3 %}
                        Necessita atenção imediata
                        {% elif funcao.media < 4 %}
                        Necessita melhorias
                        {% else %}
                        Nível adequado
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Recomendações Prioritárias -->
    <div class="section">
        <h2 class="section-title">Recomendações Prioritárias</h2>
        
        <h3>Alta Prioridade</h3>
        <ul>
            {% for rec in recomendacoes.alta %}
            <li class="priority-high">{{ rec.texto }}</li>
            {% empty %}
            <li>Nenhuma recomendação de alta prioridade</li>
            {% endfor %}
        </ul>
        
        <h3>Média Prioridade</h3>
        <ul>
            {% for rec in recomendacoes.media %}
            <li class="priority-medium">{{ rec.texto }}</li>
            {% empty %}
            <li>Nenhuma recomendação de média prioridade</li>
            {% endfor %}
        </ul>
        
        <h3>Baixa Prioridade</h3>
        <ul>
            {% for rec in recomendacoes.baixa %}
            <li class="priority-low">{{ rec.texto }}</li>
            {% empty %}
            <li>Nenhuma recomendação de baixa prioridade</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Plano de Ação -->
    <div class="section">
        <h2 class="section-title">Próximos Passos</h2>
        
        <ol>
            <li>Priorizar a implementação das recomendações de alta prioridade</li>
            <li>Desenvolver um plano de ação para as áreas críticas identificadas</li>
            <li>Agendar reavaliação em 6 meses para monitorar progresso</li>
            <li>Considerar treinamentos específicos para as áreas com menor maturidade</li>
        </ol>
    </div>

    <div class="footer">
        Relatório gerado em {{ report.data_criacao|date:"d/m/Y H:i" }} por {{ report.criado_por.nome }}<br>
        Future Security &copy; {% now "Y" %}


        mimimi
    </div>
</body>
</html>